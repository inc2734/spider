!function(){"use strict";function t(t,n,i){return n=u(n),function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(t,e()?Reflect.construct(n,i||[],u(t).constructor):n.apply(t,i))}function e(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(e=function(){return!!t})()}function n(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,n(r.key),r)}}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}function c(t,e){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c(t,e)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function h(t,e){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];try{n=new CustomEvent(e,{bubbles:r,cancelable:o,detail:i})}catch(t){(n=document.createEvent("CustomEvent")).initCustomEvent(e,r,o,i)}t.dispatchEvent(n)}function v(t){var e=this;t&&(this.dom=t,this.getId=function(){return Number(t.getAttribute("data-id"))},this.top=function(){return e.dom.getBoundingClientRect().top},this.left=function(){return e.dom.getBoundingClientRect().left},this.right=function(){return e.left()+e.offsetWidth()},this.offsetWidth=function(){return e.dom.offsetWidth},this.style=function(t,n){e.dom.style[t]=n},this.active=function(){e.dom.setAttribute("data-active","true")},this.inactive=function(){e.dom.removeAttribute("data-active")},this.visible=function(){e.dom.setAttribute("data-visible","true")},this.invisible=function(){e.dom.removeAttribute("data-visible")},this.isActive=function(){return"true"===e.dom.getAttribute("data-active")})}var m=function(t){throw new Error("".concat(t," is abstract method. Override it with the child class."))},g=function(){function t(e,n){var i=this;r(this,t),this.dom=e,this.args=n,this.slides=[].slice.call(this.dom.querySelectorAll(this.args.slide)).map((function(t,e){return t.setAttribute("data-id",e),new v(t)})),this.historyActiveSlideIds=[],this.dragStartX=void 0,this.dragStartScrollLeft=void 0,this.dragStartTime=void 0,this.isDrag=!1;var o=10,a=void 0,s=function t(){clearTimeout(a);var e,n=(e=i.slides.map((function(t){return t.top()}))).filter((function(t,n){return n===e.lastIndexOf(t)}));if(1<n.length&&0<o)return a=setTimeout(t,100),void o--;i.dragStartX=void 0,i.dragStartScrollLeft=void 0,i.dragStartTime=void 0,i.isDrag=!1,i.dom.classList.remove("is-dragging"),i.beforeInit();var r=i.contentWidth();i.setCurrent(0),i.args.container.setProperty("--spider--reference-width","".concat(i.referenceWidth(),"px")),i.args.container.setProperty("--spider--canvas-width",r),i.afterInit()};s();var u=document.body.clientWidth;window.addEventListener("resize",(function(){var t=document.body.clientWidth;u!==t&&(u=t,setTimeout(s,250))}),!1),new MutationObserver((function(){if(i.dom.querySelector('[data-id="'.concat(i.getCurrent(),'"]'))){var t=i.slides[i.getCurrent()];t&&(h(i.dom,"updateCurrent"),i.moveTo(t))}})).observe(this.dom,{attributes:!0,attributeFilter:["data-current"]}),this._handleMousedown=this._handleMousedown.bind(this),this.dom.addEventListener("mousedown",this._handleMousedown,!1),this._handleMousemove=this._handleMousemove.bind(this),this.dom.addEventListener("mousemove",this._handleMousemove,!1),this._handleMouseup=this._handleMouseup.bind(this),this.dom.addEventListener("mouseup",this._handleMouseup,!1),this.dom.addEventListener("mouseleave",this._handleMouseup,!1)}return a(t,[{key:"_handleMousedown",value:function(t){t.preventDefault(),t.stopPropagation(),this.dragStartX=t.clientX,this.dragStartScrollLeft=this.scrollLeft(),this.dragStartTime=new Date,this.isDrag=!0,this.handleMousedown(t)}},{key:"handleMousedown",value:function(t){}},{key:"_handleMousemove",value:function(t){t.preventDefault(),t.stopPropagation(),this.isDrag&&(this.dom.classList.add("is-dragging"),this.handleMousemove(t))}},{key:"handleMousemove",value:function(t){}},{key:"_handleMouseup",value:function(t){t.preventDefault(),t.stopPropagation(),this.isDrag&&(this.handleMouseup(t),this.dragStartX=void 0,this.dragStartScrollLeft=void 0,this.dragStartTime=void 0,this.isDrag=!1,this.dom.classList.remove("is-dragging"),this.afterHandleMouseup())}},{key:"handleMouseup",value:function(t){}},{key:"afterHandleMouseup",value:function(){}},{key:"scrollLeft",value:function(){return this.dom.scrollLeft}},{key:"contentWidth",value:function(){return this.dom.style.paddingRight&&this.dom.style.paddingLeft?"calc(".concat(this.dom.clientWidth,"px - ").concat(this.dom.style.paddingRight," - ").concat(this.dom.style.paddingLeft,")"):this.dom.style.paddingRight?"calc(".concat(this.dom.clientWidth,"px - ").concat(this.dom.style.paddingRight,")"):this.dom.style.paddingLeft?"calc(".concat(this.dom.clientWidth,"px - ").concat(this.dom.style.paddingLeft,")"):"".concat(this.dom.clientWidth,"px")}},{key:"offsetWidth",value:function(){return this.dom.offsetWidth}},{key:"scrollWidth",value:function(){return this.dom.scrollWidth}},{key:"referenceWidth",value:function(){return this.args.reference.clientWidth}},{key:"referenceOffsetWidth",value:function(){return this.args.reference.offsetWidth}},{key:"referenceLeft",value:function(){return this.args.reference.getBoundingClientRect().left}},{key:"left",value:function(){var t=this.referenceWidth(),e=this.referenceOffsetWidth(),n=this.referenceLeft();return n+(e-t)/2+(this.slides[0].left()-n+this.scrollLeft())}},{key:"setCurrent",value:function(t){this.dom.setAttribute("data-current",Number(t))}},{key:"getCurrent",value:function(){return Number(this.dom.getAttribute("data-current"))}},{key:"getSlides",value:function(){return this.slides}},{key:"getSlide",value:function(t){return this.slides[t]}},{key:"setCurrentForWheel",value:function(){m("abstractCanvas.setCurrentForWheel")}},{key:"moveTo",value:function(t){m("abstractCanvas.moveTo")}},{key:"beforeInit",value:function(){}},{key:"afterInit",value:function(){}}]),t}(),p=function(e){function n(e,i){var o;if(r(this,n),(o=t(this,n,[e,i])).smoothScrollToTimerId=void 0,o.canvasScrollTimerId=void 0,o.setScrollLeft=function(t){return o.dom.scrollLeft=t},o.setScrollLeft(0),o.handleScroll=o.handleScroll.bind(l(o)),o.dom.addEventListener("scroll",o.handleScroll,!1),"undefined"!=typeof IntersectionObserver){var a=new IntersectionObserver((function(t){t.forEach((function(t){var e=new v(t.target);t.isIntersecting?e.active():e.inactive()}))}),{root:o.dom,rootMargin:"0px -1.5px",threshold:[.75,1]});o.slides.forEach((function(t){a.observe(t.dom)}));var s=new IntersectionObserver((function(t){t.forEach((function(t){var e=new v(t.target);t.isIntersecting?e.visible():e.invisible()}))}),{root:o.dom,rootMargin:"0px -1px",threshold:[0]});o.slides.forEach((function(t){s.observe(t.dom)}))}return o}return s(n,e),a(n,[{key:"afterInit",value:function(){this.dom.classList.remove("is-scrolling")}},{key:"handleScroll",value:function(){var t=this;clearTimeout(this.canvasScrollTimerId),this.isDrag||(this.dom.classList.add("is-scrolling"),this.canvasScrollTimerId=setTimeout((function(){var e=t.left(),n=t.getSlide(t.getCurrent()).left();1<Math.abs(e-n)&&t.setCurrentForWheel(),h(t.dom,"scrollEnd"),t.dom.classList.remove("is-scrolling")}),250))}},{key:"handleMousedown",value:function(t){clearTimeout(this.canvasScrollTimerId)}},{key:"handleMousemove",value:function(t){this.setScrollLeft(this.dragStartScrollLeft+this.dragStartX-t.clientX)}},{key:"handleMouseup",value:function(t){var e=(new Date).getTime()-this.dragStartTime.getTime(),n=t.clientX-this.dragStartX;if(300>e){var i=this.scrollLeft()-n/e*100;this.moveToLeft(i)}}},{key:"afterHandleMouseup",value:function(){this.handleScroll()}},{key:"setCurrentForWheel",value:function(){var t=this,e=this.slides.reduce((function(e,n){var i=e.offsetWidth()-Math.abs(t.left()-e.left());return n.offsetWidth()-Math.abs(t.left()-n.left())>i?n:e}));this.setCurrent(e.getId()),h(this.dom,"setCurrentForWheel")}},{key:"moveTo",value:function(t){var e=this.scrollLeft(),n=this.scrollWidth()-this.offsetWidth(),i=e+(t.left()-this.left());n<i?i=n:(0>i||0===t.getId())&&(i=0),this.moveToLeft(i)}},{key:"moveToLeft",value:function(t){var e=this,n=this.scrollLeft();clearInterval(this.smoothScrollToTimerId);var i=0<t-n?"next":t!==n&&"prev";if(i){var r=1e3/60,o=t-n;if(0!==o){var a=o/r,s=getComputedStyle(this.dom).getPropertyValue("--spider--transition-duration").trim(),u=s.match(/ms$/)?Number(s.replace("ms","")):s.match(/s$/)?1e3*Number(s.replace("s","")):1e3,c=0,l=n;this.smoothScrollToTimerId=setInterval((function(){var r=function(t,e,n,i){return n*((t=t/i-1)*t*t+1)+e}(c+=Math.abs(a),n,o,u*Math.abs(o/750));"next"===i&&r<=t&&r>=l||"prev"===i&&r>=t&&r<=l?(e.setScrollLeft(r),l=r):(clearInterval(e.smoothScrollToTimerId),e.setScrollLeft(t))}),r)}}}}]),n}(g),y=function(e){function n(e,i){var o;return r(this,n),o=t(this,n,[e,i]),e.addEventListener("updateCurrent",(function(){o.getSlides().forEach((function(t){o.getCurrent()===t.getId()?t.active():t.inactive()}))}),!1),o}return s(n,e),a(n,[{key:"afterInit",value:function(){this.dom.classList.remove("is-fading"),this.slides.forEach((function(t,e){0!==e?(t.style("left","".concat(-1*e*100,"%")),t.inactive()):t.active()}))}},{key:"handleMouseup",value:function(t){var e=t.clientX-this.dragStartX,n=this.getCurrent();0<e?0<n&&this.setCurrent(n-1):0>e&&this.getSlides().length-1>n&&this.setCurrent(n+1)}},{key:"moveTo",value:function(t){var e=this;if(t.isActive()){this.dom.classList.add("is-fading"),[].slice.call(this.dom.querySelectorAll('[data-active="false"]')).map((function(t){return new v(t)})).forEach((function(t){return t.inactive()})),t.active();t.dom.addEventListener("transitionend",(function n(){t.dom.removeEventListener("transitionend",n,!1),h(e.dom,"fadeEnd"),e.dom.classList.remove("is-fading")}),!1)}}}]),n}(g);function b(t,e){return t.addEventListener("click",(function(){return e.handleClick()}),!1),this}function S(t,e){return t.addEventListener("click",(function(){return e.handleClick()}),!1),this}function w(t,e){var n=this;return this.active=function(){t.setAttribute("aria-current","true")},this.inactive=function(){t.removeAttribute("aria-current")},e.initial?this.active():this.inactive(),t.addEventListener("click",(function(t){return e.handleClick(t)}),!1),new MutationObserver((function(t){t.forEach((function(t){new v(t.target).isActive()?n.active():n.inactive()}))})).observe(e.relatedSlide.dom,{attributes:!0,attributeFilter:["data-active"]}),this}function L(t){var e=this;t&&(this.dom=t,this.getInterval=function(){return Number(e.dom.getAttribute("data-interval"))},this.getDuration=function(){return Number(e.dom.getAttribute("data-duration"))},this.getFade=function(){return"true"===e.dom.getAttribute("data-fade")},this.getShuffle=function(){return"true"===e.dom.getAttribute("data-shuffle")},this.setInitialized=function(t){return t&&h(e.dom,"initialized"),e.dom.setAttribute("data-initialized",t?"true":"false")},this.setProperty=function(t,n){e.dom.style.setProperty(t,n)})}var k=function(t,e){var n=[];return[].slice.call(t).forEach((function(t){var i=t.getAttribute("data-initialized");if("false"===i||!i){var r=new A(t,e);r.initialized&&n.push(r)}})),n},T=function(t,e){return new function(){var n=this,r=t.cloneNode(!0),o=void 0,a=void 0,s=function(){clearInterval(a)},u=function(t){s(),a=setInterval((function(){var t=o.getSlides().filter((function(t){return t.isActive()})),e=d(o.getSlides()).pop();t.includes(e)?n.moveTo(0):n.next()}),t)};this.initialized=!1,this.destroy=function(){var e=r.cloneNode(!0);t.parentNode.insertBefore(e,t),t.remove(),t=e,n.initialized=!1},this.init=function(){if(!n.initialized){var i=new L(t),r=t.querySelector(e.root);if(r){var a=i.getDuration();a&&i.setProperty("--spider--transition-duration","".concat(a/1e3,"s"));var c=t.querySelector(e.canvas);if(c){if(i.getShuffle())for(var l=function(t){for(var e=d(t),n=e.length-1;n>0;n--){var i=Math.floor(Math.random()*(n+1)),r=[e[i],e[n]];e[n]=r[0],e[i]=r[1]}return e}([].slice.call(c.querySelectorAll(e.slide))),f=0;f<l.length;f++)c.appendChild(c.removeChild(l[f]));var h=t.querySelector(e.reference)||r;if(h){var v=t.querySelector(e.prevArrow),m=t.querySelector(e.nextArrow),g=t.querySelectorAll(e.dot);v&&new b(v,{handleClick:function(){s(),n.prev();var t=i.getInterval();0<t&&u(t)}}),m&&new S(m,{handleClick:function(){s(),n.next();var t=i.getInterval();0<t&&u(t)}});var k=i.getFade()?y:p;o=new k(c,{slide:e.slide,reference:h,container:i});var T=i.getInterval();0<T&&(u(T),["mousedown"].forEach((function(t){return c.addEventListener(t,(function(){return s()}),!1)})),["mouseup","mouseleave"].forEach((function(t){return c.addEventListener(t,(function(){return u(T)}),!1)}))),0<g.length&&[].slice.call(g).forEach((function(t,e){t.setAttribute("data-id",e),new w(t,{initial:o.getCurrent()===e,relatedSlide:o.getSlide(e),handleClick:function(t){s(),n.moveTo(t.currentTarget.getAttribute("data-id"));var e=i.getInterval();0<e&&u(e)}})})),n.initialized=!0,i.setInitialized(n.initialized)}}}}},this.prev=function(){var t=function(){var t,e=!!o&&o.getCurrent();return!1!==e&&(0===e?o.getSlides().length-1:(d(o.getSlides()).some((function(e,n){if(e.isActive())return t=n-1,!0})),t))}();!1!==i(t)&&n.moveTo(t)},this.next=function(){var t=function(){var t;return!1!==(!!o&&o.getCurrent())&&(d(o.getSlides()).pop().isActive()?0:(d(o.getSlides()).some((function(e,n){if(e.isActive())return t=n+1,!0})),t))}();!1!==i(t)&&n.moveTo(t)},this.moveTo=function(t){o&&o.getSlide(t)&&o.setCurrent(t)};var c=new IntersectionObserver((function(t){t.forEach((function(t){t.isIntersecting&&(n.init(),c.disconnect())}))}),{rootMargin:"500px",threshold:[0]});return c.observe(t),this}};function A(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={root:".spider",reference:".spider__reference",canvas:".spider__canvas",slide:".spider__slide",prevArrow:'.spider__arrow[data-direction="prev"]',nextArrow:'.spider__arrow[data-direction="next"]',dot:".spider__dot"},i={};for(var r in n)i[r]=void 0!==e[r]?e[r]:n[r];if("string"==typeof t){if(t.match(/^#/)){var o=document.querySelector(t);if(!o)return;return T(o,i)}var a=document.querySelectorAll(t);if(1>a.length)return;return k(a,i)}return!0==t instanceof NodeList?k(t,i):!0==t instanceof HTMLElement?T(t,i):void 0}document.addEventListener("DOMContentLoaded",(function(){new A(".spider-container"),new A("#using-id-selector")}),!1)}();
