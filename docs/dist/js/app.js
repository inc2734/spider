!function(){"use strict";function o(t,e,n,i,r){var s,a=2<arguments.length&&void 0!==n?n:{},o=!(3<arguments.length&&void 0!==i)||i,c=4<arguments.length&&void 0!==r&&r;try{s=new CustomEvent(e,{bubbles:o,cancelable:c,detail:a})}catch(t){(s=document.createEvent("CustomEvent")).initCustomEvent(e,o,c,a)}t.dispatchEvent(s)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function t(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function e(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=r(n);return a(this,i?(t=r(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function u(n){n&&(this.dom=n,this.setId=function(t){n.setAttribute("data-id",t)},this.getId=function(){return Number(n.getAttribute("data-id"))},this.top=function(){return n.getBoundingClientRect().top},this.left=function(){return n.getBoundingClientRect().left},this.offsetWidth=function(){return n.offsetWidth},this.style=function(t,e){n.style[t]=e},this.setHidden=function(t){n.setAttribute("data-hidden",t)},this.getHidden=function(){return n.getAttribute("data-hidden")})}var d=function(){function r(t,e){var n=this;s(this,r),this.canvas=t,this.args=e,this.slides=[].slice.call(this.canvas.querySelectorAll(this.args.slide)).map(function(t){return new u(t)}),this.activeSlideIds=[],this.history=[],this.historyActiveSlideIds=[],this.updateActiveSlideIdsNumberOfRetrys=10,this.updateActiveSlideIdsTimerId=void 0,this.slides.forEach(function(t,e){return t.setId(e)}),this.setCurrent(0),this.updateActiveSlideIds();var i=void 0;window.addEventListener("resize",function(){clearTimeout(i),i=setTimeout(function(){n.setCurrent(0),n.updateActiveSlideIds()},250)},!1),new MutationObserver(function(t){n.moveTo(n.getCurrent())}).observe(this.canvas,{attributes:!0,attributeFilter:["data-current"]})}return t(r,[{key:"scrollLeft",value:function(){return this.canvas.scrollLeft}},{key:"offsetWidth",value:function(){return this.canvas.offsetWidth}},{key:"left",value:function(){return this.canvas.getBoundingClientRect().left}},{key:"right",value:function(){return this.left()+this.offsetWidth()}},{key:"setCurrent",value:function(t){var e=Number(t);this.canvas.setAttribute("data-current",e),this.history.push(e)}},{key:"getCurrent",value:function(){return Number(this.canvas.getAttribute("data-current"))}},{key:"getActiveSlideIds",value:function(){return this.activeSlideIds}},{key:"moveTo",value:function(){throw new Error("abstractCanvas.moveTo is abstract method. Override it with the child class.")}},{key:"getNewActiveSlideIds",value:function(){throw new Error("abstractCanvas.moveTo is abstract method. Override it with the child class.")}},{key:"updateActiveSlideIds",value:function(){var t=this;clearTimeout(this.updateActiveSlideIdsTimerId);var n;if(1<(n=this.slides.map(function(t){return t.top()})).filter(function(t,e){return e===n.lastIndexOf(t)}).length&&0<this.updateActiveSlideIdsNumberOfRetrys)return this.updateActiveSlideIdsTimerId=setTimeout(function(){return t.updateActiveSlideIds()},100),void this.updateActiveSlideIdsNumberOfRetrys--;var e=this.getNewActiveSlideIds();JSON.stringify(this.historyActiveSlideIds.slice(-1)[0])!==JSON.stringify(e)&&(this.activeSlideIds=e,this.historyActiveSlideIds.push(e),o(this.canvas,"updateActiveSlideIds"))}}]),r}(),l=function(){e(r,d);var i=c(r);function r(t,e){var o;s(this,r);function n(){o.canvas.removeEventListener("updateActiveSlideIds",n,!1),o.slides.forEach(function(t){return t.style("left","")}),o.slides.forEach(function(t,e){var n=o.slides[e-1];if(n){var i=o.right()-(n.left()+n.offsetWidth());if(0<=i&&o.right()<=t.left()){var r=(o.right()-t.left())/o.offsetWidth(),s=i/o.offsetWidth(),a="".concat(100*(r+s)-100,"%");return t.style("left",a),void t.setHidden("true")}}t.setHidden("false")})}return(o=i.call(this,t,e)).canvas.addEventListener("updateActiveSlideIds",n,!1),window.addEventListener("resize",n,!1),o.canvas.addEventListener("fadeEnd",function(){o.updateActiveSlideIds()},!1),o}return t(r,[{key:"moveTo",value:function(e){var t,n,i,r,s=new u(this.canvas.querySelector('[data-id="'.concat(e,'"]')));s&&"false"!==s.getHidden()&&(t=[].slice.call(this.canvas.querySelectorAll('[data-hidden="false"]')).map(function(t){return new u(t)}),n=[].slice.call(this.canvas.querySelectorAll('[data-hidden="true"]')).map(function(t){return new u(t)}),t.forEach(function(t){return t.setHidden("true")}),s.setHidden("false"),i=n.concat().reverse().filter(function(t){return e>t.getId()}),r=n.filter(function(t){return e<t.getId()}),i.some(function(t){return s.left()<=t.left()||void t.setHidden("false")}),r.some(function(t){return s.left()>=t.left()||void t.setHidden("false")}),o(this.canvas,"fadeEnd"))}},{key:"getNewActiveSlideIds",value:function(){var e=this,n=[];return this.slides.forEach(function(t){(null===t.getHidden()&&e.left()<=t.left()&&e.right()>t.left()||"false"===t.getHidden())&&n.push(t.getId())}),n}}]),r}(),f=function(){e(r,d);var i=c(r);function r(t,e){var n;return s(this,r),(n=i.call(this,t,e)).smoothScrollToTimerId=void 0,n.canvasScrollTimerId=void 0,n.setScrollLeft=function(t){return n.canvas.scrollLeft=t},n.setScrollLeft(0),n.canvas.addEventListener("scroll",function(){clearTimeout(n.canvasScrollTimerId),n.canvasScrollTimerId=setTimeout(function(){return o(n.canvas,"scrollEnd")},100)},!1),n.canvas.addEventListener("scrollEnd",function(){n.updateCurrent(),n.updateActiveSlideIds()},!1),n}return t(r,[{key:"moveTo",value:function(t){var e,n,i,r,s,a=this,o=new u(this.canvas.querySelector('[data-id="'.concat(t,'"]')));o&&(e=this.scrollLeft(),n=e+(o.left()-this.left()),clearInterval(this.smoothScrollToTimerId),(0<n-e?"next":n!==e&&"prev")&&(0!=(i=n-e)&&(r=i/(1e3/60),this.canvas.style.scrollSnapType="none",s=0,this.smoothScrollToTimerId=setInterval(function(){var t;s+=Math.abs(r),a.setScrollLeft(e+i*(t=s/Math.abs(i),Math.sqrt(1-Math.pow(t-1,2)))),Math.abs(i)<=s&&(clearInterval(a.smoothScrollToTimerId),a.canvas.style.scrollSnapType="",a.setScrollLeft(n))},1e3/60))))}},{key:"getNewActiveSlideIds",value:function(){var n=this,i=[];return this.slides.forEach(function(t){var e=t.left();n.left()<=e&&n.right()>e&&i.push(t.getId())}),i}},{key:"updateCurrent",value:function(){var i=this,r=[];this.slides.some(function(t,e){var n=t.left()-i.left();if(r[e]=Math.abs(n),0==n)return!0});var t=Math.min.apply(Math,r),e=r.indexOf(t);this.getCurrent()!==e&&this.setCurrent(e),this.setScrollLeft(this.scrollLeft()+r[e])}}]),r}();function v(t,e){return new(e.fade?l:f)(t,e)}function h(t,e){return t.addEventListener("click",function(){return e.handleClick()},!1),this}function p(t,e){return t.addEventListener("click",function(){return e.handleClick()},!1),this}function y(e,n){this.updateCurrent=function(t){e.querySelectorAll("".concat(n.dot,'[aria-current="true"]')).forEach(function(t){return t.setAttribute("aria-current","false")}),t.forEach(function(t){e.querySelector("".concat(n.dot,'[data-id="').concat(t,'"]')).setAttribute("aria-current","true")})};for(var t,i,r,s,a,o="true"===e.getAttribute("data-thumbnails"),c=0;c<n.slides.length;c++){var u=(t=n.dot.slice(1),i=c,a=s=r=void 0,a=document.createElement("button"),o?(r=n.slides[i],a.appendChild(r.dom.cloneNode(!0))):(s=document.createTextNode(i),a.appendChild(s)),a.classList.add(t),a.setAttribute("data-id",i),a);e.appendChild(u),u.addEventListener("click",function(t){return n.handleClick(t)},!1)}return this}var g=function(t,n){var i=[];return[].slice.call(t).forEach(function(t){var e=new S(t,n);e&&i.push(e)}),i},m=function(t,e){if("true"!==t.getAttribute("data-initialized")){var i=t.querySelector(e.canvas);if(i){var r=t.querySelector(e.prevArrow),s=t.querySelector(e.nextArrow),a=t.querySelector(e.dotsWrapper);return new function(){var n=this;return this.target=t,this.options=e,this.canvas=new v(i,{slide:this.options.slide,fade:"true"===t.getAttribute("data-fade")}),this.prev=function(){var t,e=n.canvas.getCurrent();0<e&&(t=e-1,n.canvas.setCurrent(t),"false"===n.canvas.slides[t].getHidden()&&n.prev())},this.next=function(){var t,e=n.canvas.getCurrent();n.canvas.slides.length-1>e&&(t=e+1,n.canvas.setCurrent(t),"false"===n.canvas.slides[t].getHidden()&&n.next())},this.moveTo=function(t){n.canvas.getCurrent();n.canvas.slides[t]&&n.canvas.setCurrent(t)},r&&(this.prevArrow=new h(r,{handleClick:this.prev})),s&&(this.nextArrow=new p(s,{handleClick:this.next})),a&&(this.dotsWrapper=new y(a,{slides:this.canvas.slides,dot:this.options.dot,handleClick:function(t){return n.canvas.setCurrent(t.currentTarget.getAttribute("data-id"))}}),this.dotsWrapper.updateCurrent(this.canvas.getActiveSlideIds()),i.addEventListener("updateActiveSlideIds",function(){return n.dotsWrapper.updateCurrent(n.canvas.getActiveSlideIds())},!1)),t.setAttribute("data-initialized","true"),o(t,"initialized"),this}}}};function S(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n={canvas:".spider__canvas",slide:".spider__slide",prevArrow:'.spider__arrow[data-direction="prev"]',nextArrow:'.spider__arrow[data-direction="next"]',dotsWrapper:".spider__dots",dot:".spider__dot"},i={};for(var r in n)i[r]=void 0!==e[r]?e[r]:n[r];if("string"!=typeof t)return!0==t instanceof NodeList?g(t,i):!0==t instanceof HTMLElement?m(t,i):void 0;if(t.match(/^#/)){var s=document.querySelector(t);if(!s)return;return m(s,i)}var a=document.querySelectorAll(t);return a.length<1?void 0:g(a,i)}document.addEventListener("DOMContentLoaded",function(){new S(".spider-container"),new S("#using-id-selector")},!1)}();
