!function(){"use strict";function c(t,e,n,r,i){var a,s=2<arguments.length&&void 0!==n?n:{},c=!(3<arguments.length&&void 0!==r)||r,o=4<arguments.length&&void 0!==i&&i;try{a=new CustomEvent(e,{bubbles:c,cancelable:o,detail:s})}catch(t){(a=document.createEvent("CustomEvent")).initCustomEvent(e,c,o,s)}t.dispatchEvent(a)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function t(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function e(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=i(n);return s(this,r?(t=i(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}var u=function(){function i(t,e){var n=this;a(this,i),this.canvas=t,this.args=e,this.slides=this.canvas.querySelectorAll(this.args.slide),this.activeSlideIds=[],this.updateActiveSlideIdsNumberOfRetrys=10,this.updateActiveSlideIdsTimerId=void 0,[].slice.call(this.slides).forEach(function(t,e){t.setAttribute("data-id",e)}),this.setCurrent(0),this.updateActiveSlideIds();var r=void 0;window.addEventListener("resize",function(){clearTimeout(r),r=setTimeout(function(){n.setCurrent(0),n.updateActiveSlideIds()},250)},!1),new MutationObserver(function(t){var e=n.getCurrent();n.canvas.querySelector('[data-id="'.concat(e,'"]'))&&n.moveTo(e)}).observe(this.canvas,{attributes:!0,attributeFilter:["data-current"]})}return t(i,[{key:"scrollLeft",value:function(){return this.canvas.scrollLeft}},{key:"offsetWidth",value:function(){return this.canvas.offsetWidth}},{key:"left",value:function(){return this.canvas.getBoundingClientRect().left}},{key:"right",value:function(){return this.left()+this.offsetWidth()}},{key:"setCurrent",value:function(t){this.canvas.setAttribute("data-current",t)}},{key:"getCurrent",value:function(){return Number(this.canvas.getAttribute("data-current"))}},{key:"getActiveSlideIds",value:function(){return this.activeSlideIds}},{key:"moveTo",value:function(){throw new Error("abstractCanvas.moveTo is abstract method. Override it with the child class.")}},{key:"getNewActiveSlideIds",value:function(){throw new Error("abstractCanvas.moveTo is abstract method. Override it with the child class.")}},{key:"updateActiveSlideIds",value:function(){var t=this;clearTimeout(this.updateActiveSlideIdsTimerId);var n,e=(n=[].slice.call(this.slides).map(function(t){return t.getBoundingClientRect().top})).filter(function(t,e){return e===n.lastIndexOf(t)}),r=this.getNewActiveSlideIds();if(1<e.length&&0<this.updateActiveSlideIdsNumberOfRetrys)return this.updateActiveSlideIdsTimerId=setTimeout(function(){return t.updateActiveSlideIds()},100),void this.updateActiveSlideIdsNumberOfRetrys--;this.activeSlideIds=r,c(this.canvas,"updateActiveSlideIds")}}]),i}(),d=function(){e(i,u);var r=o(i);function i(t,e){var u;a(this,i);function n(){u.canvas.removeEventListener("updateActiveSlideIds",n,!1),[].slice.call(u.slides).forEach(function(t){return t.style.left=""}),[].slice.call(u.slides).forEach(function(t,e){var n=u.slides[e-1];if(n){var r=t.getBoundingClientRect().left,i=n.getBoundingClientRect().left+t.offsetWidth,a=u.right()-i;if(0<=a&&u.right()<=r){var s=(u.right()-r)/u.offsetWidth(),c=a/u.offsetWidth(),o="".concat(100*(s+c)-100,"%");return t.style.left=o,void t.setAttribute("data-hidden","true")}}t.setAttribute("data-hidden","false")})}return(u=r.call(this,t,e)).canvas.addEventListener("updateActiveSlideIds",n,!1),window.addEventListener("resize",n,!1),u.canvas.addEventListener("fadeEnd",function(){u.updateActiveSlideIds()},!1),u}return t(i,[{key:"moveTo",value:function(e){var t,n,r,i,a,s=this.canvas.querySelector('[data-id="'.concat(e,'"]'));s&&"false"!==s.getAttribute("data-hidden")&&(t=this.canvas.querySelectorAll('[data-hidden="false"]'),n=this.canvas.querySelectorAll('[data-hidden="true"]'),[].slice.call(t).forEach(function(t){return t.setAttribute("data-hidden","true")}),s.setAttribute("data-hidden","false"),r=[].slice.call(n).reverse().filter(function(t){return e>Number(t.getAttribute("data-id"))}),i=[].slice.call(n).filter(function(t){return e<Number(t.getAttribute("data-id"))}),a=s.getBoundingClientRect().left,r.some(function(t,e){var n=t.getBoundingClientRect().left;if(a<=n)return!0;t.setAttribute("data-hidden","false")}),i.some(function(t,e){return t.getBoundingClientRect().left<=a||void t.setAttribute("data-hidden","false")}),c(this.canvas,"fadeEnd"))}},{key:"getNewActiveSlideIds",value:function(){var r=this,i=[];return[].slice.call(this.slides).forEach(function(t){var e=t.getAttribute("data-hidden"),n=t.getBoundingClientRect().left;(null===e&&r.left()<=n&&r.right()>n||"false"===e)&&i.push(t.getAttribute("data-id"))}),i}}]),i}(),l=function(){e(i,u);var r=o(i);function i(t,e){var n;return a(this,i),(n=r.call(this,t,e)).smoothScrollToTimerId=void 0,n.canvasScrollTimerId=void 0,n.setScrollLeft=function(t){return n.canvas.scrollLeft=t},n.setScrollLeft(0),n.canvas.addEventListener("scroll",function(){clearTimeout(n.canvasScrollTimerId),n.canvasScrollTimerId=setTimeout(function(){return c(n.canvas,"scrollEnd")},100)},!1),n.canvas.addEventListener("scrollEnd",function(){n.updateCurrent(),n.updateActiveSlideIds()},!1),n}return t(i,[{key:"moveTo",value:function(t){var e,n,r,i,a,s,c=this,o=this.canvas.querySelector('[data-id="'.concat(t,'"]'));o&&(e=this.scrollLeft(),n=o.getBoundingClientRect().left-this.left(),r=e+n,clearInterval(this.smoothScrollToTimerId),(0<r-e?"next":r!==e&&"prev")&&(0!=(i=r-e)&&(a=i/(1e3/60),this.canvas.style.scrollSnapType="none",s=0,this.smoothScrollToTimerId=setInterval(function(){var t;s+=Math.abs(a),c.setScrollLeft(e+i*(t=s/Math.abs(i),Math.sqrt(1-Math.pow(t-1,2)))),Math.abs(i)<=s&&(clearInterval(c.smoothScrollToTimerId),c.canvas.style.scrollSnapType="",c.setScrollLeft(r))},1e3/60))))}},{key:"getNewActiveSlideIds",value:function(){var n=this,r=[];return[].slice.call(this.slides).forEach(function(t){var e=t.getBoundingClientRect().left;n.left()<=e&&n.right()>e&&r.push(t.getAttribute("data-id"))}),r}},{key:"updateCurrent",value:function(){var r=this,i=[];[].slice.call(this.slides).some(function(t,e){var n=t.getBoundingClientRect().left-r.left();if(i[e]=Math.abs(n),0==n)return!0});var t=Math.min.apply(Math,i),e=i.indexOf(t);this.getCurrent()!==e&&this.setCurrent(e),this.setScrollLeft(this.scrollLeft()+i[e])}}]),i}();function f(t,e){return new(e.fade?d:l)(t,e)}function v(t,e){return t.addEventListener("click",function(){return e.handleClick()},!1),this}function h(t,e){return t.addEventListener("click",function(){return e.handleClick()},!1),this}function p(e,n){this.updateCurrent=function(t){e.querySelectorAll("".concat(n.dot,'[aria-current="true"]')).forEach(function(t){return t.setAttribute("aria-current","false")}),t.forEach(function(t){e.querySelector("".concat(n.dot,'[data-id="').concat(t,'"]')).setAttribute("aria-current","true")})};for(var t,r,i,a,s=0;s<n.numberOfSlides;s++){var c=(t=n.dot.slice(1),r=s,a=i=void 0,i=document.createElement("button"),a=document.createTextNode(r),i.appendChild(a),i.classList.add(t),i.setAttribute("data-id",r),i);e.appendChild(c),c.addEventListener("click",function(t){return n.handleClick(t)},!1)}return this}var g=function(t,n){var r=[];return[].slice.call(t).forEach(function(t){var e=new y(t,n);e&&r.push(e)}),r},b=function(t,n){var r=t.querySelector(n.canvas);if(r){var i=t.querySelector(n.prevArrow),a=t.querySelector(n.nextArrow),s=t.querySelector(n.dotsWrapper);return new function(){var e=this;return this.target=t,this.options=n,this.canvas=new f(r,{slide:this.options.slide,fade:"true"===t.getAttribute("data-fade")}),this.prev=function(){var t=e.canvas.getCurrent();0<t&&e.canvas.setCurrent(t-1)},this.next=function(){var t=e.canvas.getCurrent();e.canvas.slides.length-1>t&&e.canvas.setCurrent(t+1)},this.moveTo=function(t){e.canvas.getCurrent();e.canvas.slides[t]&&e.canvas.setCurrent(t)},i&&(this.prevArrow=new v(i,{handleClick:this.prev})),a&&(this.nextArrow=new h(a,{handleClick:this.next})),s&&(this.dotsWrapper=new p(s,{numberOfSlides:this.canvas.slides.length,dot:this.options.dot,handleClick:function(t){return e.canvas.setCurrent(t.currentTarget.getAttribute("data-id"))}}),this.dotsWrapper.updateCurrent(this.canvas.getActiveSlideIds()),r.addEventListener("updateActiveSlideIds",function(){return e.dotsWrapper.updateCurrent(e.canvas.getActiveSlideIds())},!1)),t.setAttribute("data-initialized","true"),c(t,"initialized"),this}}};function y(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n={canvas:".spider__canvas",slide:".spider__slide",prevArrow:'.spider__arrow[data-direction="prev"]',nextArrow:'.spider__arrow[data-direction="next"]',dotsWrapper:".spider__dots",dot:".spider__dot"},r={};for(var i in n)r[i]=void 0!==e[i]?e[i]:n[i];if("string"!=typeof t)return!0==t instanceof NodeList?g(t,r):!0==t instanceof HTMLElement?b(t,r):void 0;if(t.match(/^#/)){var a=document.querySelector(t);if(!a)return;return b(a,r)}var s=document.querySelectorAll(t);return s.length<1?void 0:g(s,r)}document.addEventListener("DOMContentLoaded",function(){new y(".spider-container"),new y("#using-id-selector")},!1)}();
