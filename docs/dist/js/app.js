!function(){"use strict";function s(t,e,n,r,i){var o,a=2<arguments.length&&void 0!==n?n:{},u=!(3<arguments.length&&void 0!==r)||r,s=4<arguments.length&&void 0!==i&&i;try{o=new CustomEvent(e,{bubbles:u,cancelable:s,detail:a})}catch(t){(o=document.createEvent("CustomEvent")).initCustomEvent(e,u,s,a)}t.dispatchEvent(o)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function t(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function e(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(o){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e,n,r,i=l(o);return e=a?(t=l(this).constructor,Reflect.construct(i,arguments,t)):i.apply(this,arguments),n=this,!(r=e)||"object"!=typeof r&&"function"!=typeof r?c(n):r}}function d(n){n&&(this.dom=n,this.getId=function(){return Number(n.getAttribute("data-id"))},this.top=function(){return n.getBoundingClientRect().top},this.left=function(){return n.getBoundingClientRect().left},this.offsetWidth=function(){return n.offsetWidth},this.style=function(t,e){n.style[t]=e},this.setHidden=function(t){null===t?n.removeAttribute("data-hidden"):n.setAttribute("data-hidden",t)},this.getHidden=function(){return n.getAttribute("data-hidden")})}function i(t){throw new Error("".concat(t," is abstract method. Override it with the child class."))}var a=function(){function n(t,e){var r=this;u(this,n),this.target=t,this.args=e,this.slides=[].slice.call(this.target.querySelectorAll(this.args.slide)).map(function(t){return new d(t)}),this.historyActiveSlideIds=[];function i(){var n;if(clearTimeout(a),1<(n=r.slides.map(function(t){return t.top()})).filter(function(t,e){return e===n.lastIndexOf(t)}).length&&0<o)return a=setTimeout(i,100),void o--;r.beforeInit(),r.setCurrent(0),r.updateActiveSlideIds(),r.afterInit()}var o=10,a=void 0;i(),window.addEventListener("resize",function(){return setTimeout(i,250)},!1),new MutationObserver(function(){var t;!r.target.querySelector('[data-id="'.concat(r.getCurrent(),'"]'))||(t=r.slides[r.getCurrent()])&&r.moveTo(t)}).observe(this.target,{attributes:!0,attributeFilter:["data-current"]})}return t(n,[{key:"scrollLeft",value:function(){return this.target.scrollLeft}},{key:"offsetWidth",value:function(){return this.target.offsetWidth}},{key:"left",value:function(){return this.target.getBoundingClientRect().left}},{key:"right",value:function(){return this.left()+this.offsetWidth()}},{key:"setCurrent",value:function(t){this.target.setAttribute("data-current",Number(t))}},{key:"getCurrent",value:function(){return Number(this.target.getAttribute("data-current"))}},{key:"getSlide",value:function(t){return this.slides[t]}},{key:"getActiveSlideIds",value:function(){return JSON.parse(this.target.getAttribute("data-active-slide-ids"))}},{key:"setActiveSlideIds",value:function(t){this.target.setAttribute("data-active-slide-ids",JSON.stringify(t))}},{key:"updateActiveSlideIds",value:function(){var t=this.getNewActiveSlideIds();JSON.stringify(this.historyActiveSlideIds.slice(-1)[0])!==JSON.stringify(t)&&(this.historyActiveSlideIds.push(t),this.setActiveSlideIds(t))}},{key:"moveTo",value:function(){i("abstractCanvas.moveTo")}},{key:"getNewActiveSlideIds",value:function(){i("abstractCanvas.getNewActiveSlideIds")}},{key:"beforeInit",value:function(){i("abstractCanvas.beforeInit")}},{key:"afterInit",value:function(){i("abstractCanvas.afterInit")}}]),n}(),f=function(){e(r,a);var n=o(r);function r(t,e){return u(this,r),n.call(this,t,e)}return t(r,[{key:"beforeInit",value:function(){this.slides.forEach(function(t){t.style("left",""),t.setHidden(null)})}},{key:"afterInit",value:function(){var s=this;this.slides.forEach(function(t,e){var n=s.right(),r=s.offsetWidth(),i=s.getSlide(e-1);if(i){var o=t.left(),a=n-(i.left()+i.offsetWidth());if(n<=o){var u="".concat(((n-o)/r+a/r-1)*r,"px");return t.style("left",u),void t.setHidden("true")}}t.setHidden("false")})}},{key:"moveTo",value:function(e){var t,n,r,i,o,a,u=this;"false"!==e.getHidden()&&(e.dom.addEventListener("transitionend",function t(){e.dom.removeEventListener("transitionend",t,!1),s(u.target,"fadeEnd")},!1),t=[].slice.call(this.target.querySelectorAll('[data-hidden="false"]')).map(function(t){return new d(t)}),n=[].slice.call(this.target.querySelectorAll('[data-hidden="true"]')).map(function(t){return new d(t)}),t.forEach(function(t){return t.setHidden("true")}),e.setHidden("false"),r=this.getCurrent(),i=e.left(),o=n.concat().reverse().filter(function(t){return r>t.getId()}),a=n.filter(function(t){return r<t.getId()}),o.some(function(t){return i<=t.left()||void t.setHidden("false")}),a.some(function(t){return i>=t.left()||void t.setHidden("false")}),this.updateActiveSlideIds())}},{key:"getNewActiveSlideIds",value:function(){var n=[],r=Math.round(this.left()),i=Math.round(this.right());return this.slides.forEach(function(t){var e=Math.round(t.left());(null===t.getHidden()&&r<=e&&e<i||"false"===t.getHidden())&&n.push(t.getId())}),n}}]),r}(),h=function(){e(i,a);var r=o(i);function i(t,e){var n;return u(this,i),(n=r.call(this,t,e)).smoothScrollToTimerId=void 0,n.canvasScrollTimerId=void 0,n.setScrollLeft=function(t){return n.target.scrollLeft=t},n.setScrollLeft(0),n.handleScroll=n.handleScroll.bind(c(n)),n.target.addEventListener("scroll",n.handleScroll,!1),n}return t(i,[{key:"beforeInit",value:function(){}},{key:"afterInit",value:function(){}},{key:"handleScroll",value:function(){var t=this;clearTimeout(this.canvasScrollTimerId),this.canvasScrollTimerId=setTimeout(function(){t.updateActiveSlideIds(),t.setCurrentForWheel(),s(t.target,"scrollEnd")},250)}},{key:"setCurrentForWheel",value:function(){var n=this,r=this.left();this.slides.some(function(t,e){if(0===Math.round(Math.abs(t.left()-r)))return n.setCurrent(t.getId()),!0})}},{key:"moveTo",value:function(t){var e,n,r,i=this,o=this.scrollLeft(),a=o+(t.left()-this.left());clearInterval(this.smoothScrollToTimerId),(0<a-o?"next":a!==o&&"prev")&&(0!==(e=Math.round(a-o))&&(n=e/(1e3/60),this.target.style.scrollSnapType="none",r=0,this.smoothScrollToTimerId=setInterval(function(){var t;r+=Math.abs(n),i.setScrollLeft(o+e*(t=r/Math.abs(e),Math.sqrt(1-Math.pow(t-1,2)))),Math.abs(e)<=r&&(clearInterval(i.smoothScrollToTimerId),i.target.style.scrollSnapType="",i.setScrollLeft(a))},1e3/60)))}},{key:"getNewActiveSlideIds",value:function(){var n=[],r=Math.round(this.left()),i=Math.round(this.right());return this.slides.forEach(function(t){var e=Math.round(t.left());r<=e&&e<i&&n.push(t.getId())}),n}}]),i}();function v(t,e){return new(e.fade?f:h)(t,e)}function g(t,e){return t.addEventListener("click",function(){return e.handleClick()},!1),this}function y(t,e){return t.addEventListener("click",function(){return e.handleClick()},!1),this}function p(n,e){return this.updateCurrent=function(t){n.setAttribute("aria-current","false");var e=Number(n.getAttribute("data-id"));-1!==t.indexOf(e)&&n.setAttribute("aria-current","true")},n.addEventListener("click",function(t){return e.handleClick(t)},!1),this}var b=function(t,n){var r=[];return[].slice.call(t).forEach(function(t){var e=new m(t,n);e.initialized&&r.push(e)}),r},S=function(a,u){return new function(){var i=this,e=a.cloneNode(!0),o=void 0;return this.initialized=!1,this.destroy=function(){var t=e.cloneNode(!0);a.parentNode.insertBefore(t,a),a.remove(),a=t,i.initialized=!1},this.init=function(){var n,t,e,r;i.initialized||(n=a.querySelector(u.canvas))&&(t=a.querySelector(u.prevArrow),e=a.querySelector(u.nextArrow),r=a.querySelectorAll(u.dot),t&&new g(t,{handleClick:i.prev}),e&&new y(e,{handleClick:i.next}),0<r.length&&[].slice.call(r).forEach(function(t){var e=new p(t,{handleClick:function(t){return o.setCurrent(t.currentTarget.getAttribute("data-id"))}});new MutationObserver(function(t){e.updateCurrent(o.getActiveSlideIds())}).observe(n,{attributes:!0,attributeFilter:["data-active-slide-ids"]})}),o=new v(n,{slide:u.slide,fade:"true"===a.getAttribute("data-fade")}),i.initialized=!0,a.setAttribute("data-initialized","true"),s(a,"initialized"))},this.prev=function(){var t,e=!!o&&o.getCurrent();!1!==e&&0<e&&(t=e-1,o.setCurrent(t),"false"===o.getSlide(t).getHidden()&&i.prev())},this.next=function(){var t,e=!!o&&o.getCurrent();!1!==e&&o.slides.length-1>e&&(t=e+1,o.setCurrent(t),"false"===o.getSlide(t).getHidden()&&i.next())},this.moveTo=function(t){o&&o.getSlide(t)&&o.setCurrent(t)},this.init(),this}};function m(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n={canvas:".spider__canvas",slide:".spider__slide",prevArrow:'.spider__arrow[data-direction="prev"]',nextArrow:'.spider__arrow[data-direction="next"]',dot:".spider__dot"},r={};for(var i in n)r[i]=void 0!==e[i]?e[i]:n[i];if("string"!=typeof t)return!0==t instanceof NodeList?b(t,r):!0==t instanceof HTMLElement?S(t,r):void 0;if(t.match(/^#/)){var o=document.querySelector(t);if(!o)return;return S(o,r)}var a=document.querySelectorAll(t);return a.length<1?void 0:b(a,r)}document.addEventListener("DOMContentLoaded",function(){new m(".spider-container"),new m("#using-id-selector")},!1)}();
