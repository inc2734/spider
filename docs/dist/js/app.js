!function(){"use strict";function u(t,e,n,i,r){var s,a=2<arguments.length&&void 0!==n?n:{},o=!(3<arguments.length&&void 0!==i)||i,u=4<arguments.length&&void 0!==r&&r;try{s=new CustomEvent(e,{bubbles:o,cancelable:u,detail:a})}catch(t){(s=document.createEvent("CustomEvent")).initCustomEvent(e,o,u,a)}t.dispatchEvent(s)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function t(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function e(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(s){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e,n,i,r=o(s);return e=a?(t=o(this).constructor,Reflect.construct(r,arguments,t)):r.apply(this,arguments),n=this,!(i=e)||"object"!=typeof i&&"function"!=typeof i?c(n):i}}function l(n){n&&(this.dom=n,this.getId=function(){return Number(n.getAttribute("data-id"))},this.top=function(){return n.getBoundingClientRect().top},this.left=function(){return n.getBoundingClientRect().left},this.offsetWidth=function(){return n.offsetWidth},this.style=function(t,e){n.style[t]=e},this.setHidden=function(t){n.setAttribute("data-hidden",t)},this.getHidden=function(){return n.getAttribute("data-hidden")})}var d=function(){function n(t,e){var i=this;a(this,n),this.canvas=t,this.args=e,this.slides=[].slice.call(this.canvas.querySelectorAll(this.args.slide)).map(function(t){return new l(t)}),this.activeSlideIds=[],this.history=[],this.historyActiveSlideIds=[];var r=10,s=void 0;this.setCurrent(0),this.setAnimating(!0),function t(){clearTimeout(s);var n;if(1<(n=i.slides.map(function(t){return t.top()})).filter(function(t,e){return e===n.lastIndexOf(t)}).length&&0<r)return s=setTimeout(t,100),void r--;i.updateActiveSlideIds(),i.setAnimating(!1),i.initHook()}(),this.resizeTimerId=void 0,this.handleResize=this.handleResize.bind(this),window.addEventListener("resize",this.handleResize,!1),new MutationObserver(function(){var t;!i.canvas.querySelector('[data-id="'.concat(i.getCurrent(),'"]'))||(t=i.slides[i.getCurrent()])&&i.moveTo(t)}).observe(this.canvas,{attributes:!0,attributeFilter:["data-current"]})}return t(n,[{key:"handleResize",value:function(){var t=this;clearTimeout(this.resizeTimerId),this.resizeTimerId=setTimeout(function(){t.setCurrent(0),t.updateActiveSlideIds()},250)}},{key:"scrollLeft",value:function(){return this.canvas.scrollLeft}},{key:"offsetWidth",value:function(){return this.canvas.offsetWidth}},{key:"left",value:function(){return this.canvas.getBoundingClientRect().left}},{key:"right",value:function(){return this.left()+this.offsetWidth()}},{key:"setCurrent",value:function(t){var e=Number(t);this.canvas.setAttribute("data-current",e),this.history.push(e)}},{key:"getCurrent",value:function(){return Number(this.canvas.getAttribute("data-current"))}},{key:"getSlide",value:function(t){return this.slides[t]}},{key:"getActiveSlideIds",value:function(){return this.activeSlideIds}},{key:"setAnimating",value:function(t){var e=t?"true":"false";this.canvas.setAttribute("data-animating",e)}},{key:"getAnimating",value:function(){return"true"===this.canvas.getAttribute("data-animating")}},{key:"moveTo",value:function(){throw new Error("abstractCanvas.moveTo is abstract method. Override it with the child class.")}},{key:"getNewActiveSlideIds",value:function(){throw new Error("abstractCanvas.moveTo is abstract method. Override it with the child class.")}},{key:"initHook",value:function(){}},{key:"updateActiveSlideIds",value:function(){var t=this.getNewActiveSlideIds(),e=JSON.stringify(t);JSON.stringify(this.historyActiveSlideIds.slice(-1)[0])!==e&&(this.activeSlideIds=t,this.historyActiveSlideIds.push(t))}}]),n}(),r=function(){e(r,d);var i=s(r);function r(t,e){var n;return a(this,r),(n=i.call(this,t,e)).initHook=n.initHook.bind(c(n)),window.addEventListener("resize",n.initHook,!1),n}return t(r,[{key:"initHook",value:function(){var u=this;this.slides.forEach(function(t){return t.style("left","")}),this.slides.forEach(function(t,e){var n=u.right(),i=u.offsetWidth(),r=u.getSlide(e-1);if(r){var s=t.left(),a=n-(r.left()+r.offsetWidth());if(n<=s){var o="".concat(((n-s)/i+a/i-1)*i,"px");return t.style("left",o),void t.setHidden("true")}}t.setHidden("false")})}},{key:"moveTo",value:function(e){var t,n,i,r,s,a,o=this;"false"!==e.getHidden()&&(this.setAnimating(!0),e.dom.addEventListener("transitionend",function t(){e.dom.removeEventListener("transitionend",t,!1),o.setAnimating(!1),u(o.canvas,"fadeEnd")},!1),t=[].slice.call(this.canvas.querySelectorAll('[data-hidden="false"]')).map(function(t){return new l(t)}),n=[].slice.call(this.canvas.querySelectorAll('[data-hidden="true"]')).map(function(t){return new l(t)}),t.forEach(function(t){return t.setHidden("true")}),e.setHidden("false"),i=this.getCurrent(),r=e.left(),s=n.concat().reverse().filter(function(t){return i>t.getId()}),a=n.filter(function(t){return i<t.getId()}),s.some(function(t){return r<=t.left()||void t.setHidden("false")}),a.some(function(t){return r>=t.left()||void t.setHidden("false")}),this.updateActiveSlideIds())}},{key:"getNewActiveSlideIds",value:function(){var n=[],i=Math.round(this.left()),r=Math.round(this.right());return this.slides.forEach(function(t){var e=Math.round(t.left());(null===t.getHidden()&&i<=e&&e<r||"false"===t.getHidden())&&n.push(t.getId())}),n}}]),r}(),f=function(){e(r,d);var i=s(r);function r(t,e){var n;return a(this,r),(n=i.call(this,t,e)).smoothScrollToTimerId=void 0,n.canvasScrollTimerId=void 0,n.setScrollLeft=function(t){return n.canvas.scrollLeft=t},n.setScrollLeft(0),n.handleScroll=n.handleScroll.bind(c(n)),n.canvas.addEventListener("scroll",n.handleScroll,!1),n}return t(r,[{key:"handleScroll",value:function(){var t=this;clearTimeout(this.canvasScrollTimerId),this.setAnimating(!0),this.canvasScrollTimerId=setTimeout(function(){t.updateActiveSlideIds(),t.setCurrentForWheel(),t.setAnimating(!1),u(t.canvas,"scrollEnd")},250)}},{key:"setCurrentForWheel",value:function(){var n=this,i=this.left();this.slides.some(function(t,e){if(0===Math.round(Math.abs(t.left()-i)))return n.setCurrent(t.getId()),!0})}},{key:"moveTo",value:function(t){var e,n,i,r=this,s=this.scrollLeft(),a=s+(t.left()-this.left());clearInterval(this.smoothScrollToTimerId),(0<a-s?"next":a!==s&&"prev")&&(0!==(e=Math.round(a-s))&&(n=e/(1e3/60),this.canvas.style.scrollSnapType="none",i=0,this.smoothScrollToTimerId=setInterval(function(){var t;i+=Math.abs(n),r.setScrollLeft(s+e*(t=i/Math.abs(e),Math.sqrt(1-Math.pow(t-1,2)))),Math.abs(e)<=i&&(clearInterval(r.smoothScrollToTimerId),r.canvas.style.scrollSnapType="",r.setScrollLeft(a))},1e3/60)))}},{key:"getNewActiveSlideIds",value:function(){var n=[],i=Math.round(this.left()),r=Math.round(this.right());return this.slides.forEach(function(t){var e=Math.round(t.left());i<=e&&e<r&&n.push(t.getId())}),n}}]),r}();function h(t,e){return new(e.fade?r:f)(t,e)}function v(t,e){return t.addEventListener("click",function(){return e.handleClick()},!1),this}function g(t,e){return t.addEventListener("click",function(){return e.handleClick()},!1),this}function y(n,e){return this.updateCurrent=function(t){n.setAttribute("aria-current","false");var e=Number(n.getAttribute("data-id"));-1!==t.indexOf(e)&&n.setAttribute("aria-current","true")},n.addEventListener("click",function(t){return e.handleClick(t)},!1),this}var m=function(t,n){var i=[];return[].slice.call(t).forEach(function(t){var e=new b(t,n);e.initialized&&i.push(e)}),i},p=function(a,o){return new function(){var r=this,e=a.cloneNode(!0),s=void 0;return this.initialized=!1,this.destroy=function(){var t=e.cloneNode(!0);a.parentNode.insertBefore(t,a),a.remove(),a=t,r.initialized=!1},this.init=function(){var n,t,e,i;r.initialized||(n=a.querySelector(o.canvas))&&(t=a.querySelector(o.prevArrow),e=a.querySelector(o.nextArrow),i=a.querySelectorAll(o.dot),t&&new v(t,{handleClick:r.prev}),e&&new g(e,{handleClick:r.next}),0<i.length&&[].slice.call(i).forEach(function(t){var e=new y(t,{handleClick:function(t){return s.setCurrent(t.currentTarget.getAttribute("data-id"))}});new MutationObserver(function(t){e.updateCurrent(s.getActiveSlideIds())}).observe(n,{attributes:!0,attributeFilter:["data-animating"]})}),s=new h(n,{slide:o.slide,fade:"true"===a.getAttribute("data-fade")}),r.initialized=!0,a.setAttribute("data-initialized","true"),u(a,"initialized"))},this.prev=function(){var t,e=!!s&&s.getCurrent();!1!==e&&0<e&&(t=e-1,s.setCurrent(t),"false"===s.getSlide(t).getHidden()&&r.prev())},this.next=function(){var t,e=!!s&&s.getCurrent();!1!==e&&s.slides.length-1>e&&(t=e+1,s.setCurrent(t),"false"===s.getSlide(t).getHidden()&&r.next())},this.moveTo=function(t){s&&s.getSlide(t)&&s.setCurrent(t)},this.init(),this}};function b(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n={canvas:".spider__canvas",slide:".spider__slide",prevArrow:'.spider__arrow[data-direction="prev"]',nextArrow:'.spider__arrow[data-direction="next"]',dot:".spider__dot"},i={};for(var r in n)i[r]=void 0!==e[r]?e[r]:n[r];if("string"!=typeof t)return!0==t instanceof NodeList?m(t,i):!0==t instanceof HTMLElement?p(t,i):void 0;if(t.match(/^#/)){var s=document.querySelector(t);if(!s)return;return p(s,i)}var a=document.querySelectorAll(t);return a.length<1?void 0:m(a,i)}document.addEventListener("DOMContentLoaded",function(){new b(".spider-container"),new b("#using-id-selector")},!1)}();
